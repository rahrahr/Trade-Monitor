Index: trade.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from dataclasses import dataclass\r\nfrom itertools import count\r\n\r\n@dataclass\r\nclass Trade:\r\n    '''\r\n    记录一笔交易的基本信息\r\n    '''\r\n    id = count()\r\n    def __init__(self,\r\n                 bond_code: str = '',\r\n                 amount: float = 0,\r\n                 par_amount: float = 10,\r\n                 volume: int = 10,\r\n                 trade_time: str = '2021-07-01',\r\n                 settlement_date: str = '2021-07-01',\r\n                 settlement_days: str = '2021-07-01',\r\n                 direction: str = '买入',\r\n                 is_inside_trade: bool = False,\r\n                 inside_id: str = '',\r\n                 other_inside_id: str = ''):\r\n\r\n        self.id = next(Trade.id)\r\n        self.bond_code: str = bond_code\r\n        self.amount: float = amount\r\n        self.par_amount: float = par_amount\r\n        self.volume: int = volume\r\n\r\n        self.trade_time: str = trade_time\r\n        self.settlement_date: str = settlement_date\r\n        self.settlement_days: str = settlement_days\r\n        self.is_settled: bool = False\r\n        self.direction: str = direction\r\n\r\n        self.is_inside_trade: bool = is_inside_trade\r\n        self.inside_id: str = inside_id\r\n        if is_inside_trade:\r\n            self.other_inside_id = other_inside_id\r\n\r\n    def reversed(self):\r\n        if hasattr(self, 'in_bond_code'):\r\n            #转托管\r\n            trade = Trade(self.in_bond_code, self.amount,\r\n                          self.par_amount, self.volume,\r\n                          self.trade_time, self.settlement_date,\r\n                          self.settlement_days, reversed_direction,\r\n                          self.is_inside_trade, self.other_inside_id,\r\n                          self.inside_id)\r\n            trade.in_bond_code = self.bond_code\r\n            trade.id = self.id\r\n            return trade\r\n            \r\n        reversed_direction = \"卖出\" if self.direction == \"买入\" else \"买入\"\r\n        return Trade(self.bond_code, self.amount,\r\n                     self.par_amount, self.volume,\r\n                     self.trade_time, self.settlement_date,\r\n                     self.settlement_days, reversed_direction,\r\n                     self.is_inside_trade, self.other_inside_id,\r\n                     self.inside_id)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/trade.py b/trade.py
--- a/trade.py	(revision aa6f92ee0f534152cb7962c3553c3a5f79070538)
+++ b/trade.py	(date 1627193368091)
@@ -40,6 +40,7 @@
     def reversed(self):
         if hasattr(self, 'in_bond_code'):
             #转托管
+            reversed_direction = '转托管-转入'
             trade = Trade(self.in_bond_code, self.amount,
                           self.par_amount, self.volume,
                           self.trade_time, self.settlement_date,
Index: trader.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\r\n    \"\\u5185\\u90e8\\u8d26\\u6237\": {\r\n        \"A\": {\r\n            \"position\": {\r\n                \"210205.IB\": 10000000.0,\r\n                \"210303.IB\": 35000000.0,\r\n                \"210006.IB\": 40000000.0\r\n            },\r\n            \"cash\": 100000000.0\r\n        },\r\n        \"B\": {\r\n            \"position\": {\r\n                \"019656.SH\": 10000000.0,\r\n                \"210303.IB\": 20000000.0,\r\n                \"019654.SH\": 60000000.0\r\n            },\r\n            \"cash\": 30000000.0\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/trader.json b/trader.json
--- a/trader.json	(revision aa6f92ee0f534152cb7962c3553c3a5f79070538)
+++ b/trader.json	(date 1627194032604)
@@ -1,20 +1,1 @@
-{
-    "\u5185\u90e8\u8d26\u6237": {
-        "A": {
-            "position": {
-                "210205.IB": 10000000.0,
-                "210303.IB": 35000000.0,
-                "210006.IB": 40000000.0
-            },
-            "cash": 100000000.0
-        },
-        "B": {
-            "position": {
-                "019656.SH": 10000000.0,
-                "210303.IB": 20000000.0,
-                "019654.SH": 60000000.0
-            },
-            "cash": 30000000.0
-        }
-    }
-}
\ No newline at end of file
+{"\u5185\u90e8\u8d26\u6237": {"A": {"position": {"210205.IB": 10000000.0, "210303.IB": 35000000.0, "210006.IB": 40000000.0}, "cash": 100000000.0}, "B": {"position": {"019656.SH": 10000000.0, "210303.IB": 20000000.0, "019654.SH": 60000000.0}, "cash": 30000000.0}}}
\ No newline at end of file
